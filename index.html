<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Will you be my Valentine?</title>
    <style>
      :root {
        --bg1: #ffdee9;
        --bg2: #b5fffc;
        --ink: #1b1b1b;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        min-height: 100vh;
        display: grid;
        place-items: center;
        font-family:
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          Arial,
          sans-serif;
        background:
          radial-gradient(circle at 20% 20%, var(--bg2), transparent 45%),
          radial-gradient(circle at 80% 20%, var(--bg1), transparent 45%),
          linear-gradient(135deg, #fff 0%, #ffe6ef 55%, #e6fffe 100%);
        color: var(--ink);
        overflow: hidden;
      }

      .card {
        width: min(560px, 92vw);
        background: rgba(255, 255, 255, 0.78);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 24px;
        padding: 28px 22px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12);
        text-align: center;
        position: relative;
        z-index: 2;
        backdrop-filter: blur(8px);
      }
      h1 {
        margin: 0 0 8px;
        font-size: clamp(28px, 4vw, 42px);
      }
      p {
        margin: 0 0 18px;
        opacity: 0.85;
      }

      .btns {
        display: flex;
        gap: 12px;
        justify-content: center;
        flex-wrap: wrap;
      }
      button {
        border: 0;
        padding: 12px 18px;
        border-radius: 999px;
        font-weight: 800;
        font-size: 16px;
        cursor: pointer;
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
        transition:
          transform 0.12s ease,
          filter 0.12s ease;
        user-select: none;
      }
      button:hover {
        transform: translateY(-1px) scale(1.02);
        filter: brightness(1.02);
      }
      button:active {
        transform: translateY(0) scale(0.99);
      }
      #yesBtn {
        background: #ff4d7d;
        color: #fff;
      }
      #noBtn {
        background: #222;
        color: #fff;
      }

      /* Popup */
      .popup {
        position: fixed;
        min-width: 180px;
        max-width: 360px;
        padding: 10px 12px;
        background: rgba(255, 255, 255, 0.92);
        border: 1px solid rgba(0, 0, 0, 0.15);
        border-radius: 14px;
        box-shadow: 0 16px 40px rgba(0, 0, 0, 0.25);
        font-weight: 800;
        z-index: 9999;
        transform: translate(-50%, -50%);
        pointer-events: none;
        animation:
          popIn 0.18s ease-out,
          wiggle 0.7s ease-in-out infinite;
      }
      @keyframes popIn {
        from {
          transform: translate(-50%, -50%) scale(0.6);
          opacity: 0.2;
        }
        to {
          transform: translate(-50%, -50%) scale(1);
          opacity: 1;
        }
      }
      @keyframes wiggle {
        0%,
        100% {
          filter: none;
        }
        50% {
          filter: hue-rotate(45deg) contrast(1.1);
        }
      }

      /* Success overlay */
      .successOverlay {
        position: fixed;
        inset: 0;
        display: none;
        place-items: center;
        z-index: 12000;
        background: rgba(0, 0, 0, 0.35);
        padding: 18px;
      }
      .successOverlay.on {
        display: grid;
      }

      .successCard {
        width: min(600px, 94vw);
        background: rgba(255, 255, 255, 0.94);
        border: 1px solid rgba(0, 0, 0, 0.12);
        border-radius: 22px;
        padding: 18px 16px;
        box-shadow: 0 24px 70px rgba(0, 0, 0, 0.28);
        text-align: center;
      }

      .successRow {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 14px;
        flex-wrap: wrap;
      }
      .successRow img {
        width: 130px;
        height: 130px;
        object-fit: contain;
        filter: drop-shadow(0 12px 20px rgba(0, 0, 0, 0.18));
      }

      .successText {
        font-weight: 950;
        font-size: 22px;
        line-height: 1.2;
      }
      .mini {
        margin-top: 6px;
        font-size: 12px;
        opacity: 0.75;
      }

      .continueBtn {
        margin-top: 12px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        padding: 14px 22px;
        border-radius: 999px;
        font-weight: 950;
        cursor: pointer;
        border: 0;
        background: #ff4d7d;
        color: #fff;
        box-shadow: 0 14px 34px rgba(0, 0, 0, 0.22);
        opacity: 1;
        font-size: 17px;
      }
      .continueBtn:active {
        transform: scale(0.99);
      }

      .countdown {
        margin-top: 10px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 76px;
        padding: 8px 18px;
        border-radius: 14px;
        font-weight: 950;
        font-size: 46px;
        background: rgba(0, 0, 0, 0.06);
      }

      /* Video modal (cinema) */
      .videoModal {
        position: fixed;
        inset: 0;
        display: none;
        place-items: center;
        background: rgba(0, 0, 0, 0.8);
        z-index: 10000;
        padding: 10px;
      }
      .videoModal.on {
        display: grid;
      }

      .panel {
        width: min(1180px, 98vw);
      }

      .videoBox {
        width: 100%;
        height: min(86vh, 720px);
        background: #000;
        border-radius: 22px;
        overflow: hidden;
        box-shadow: 0 50px 140px rgba(0, 0, 0, 0.75);
        border: 1px solid rgba(255, 255, 255, 0.18);
        display: flex;
        align-items: center;
        justify-content: center;
        transform: scale(0.92);
        opacity: 0;
        position: relative;
      }

      .videoBox::after {
        content: "";
        position: absolute;
        inset: 0;
        pointer-events: none;
        background: radial-gradient(
          circle at center,
          rgba(0, 0, 0, 0) 45%,
          rgba(0, 0, 0, 0.55) 100%
        );
        z-index: 2;
      }

      .videoModal.on .videoBox {
        animation: videoEnter 0.65s ease-out forwards;
      }
      @keyframes videoEnter {
        0% {
          transform: scale(0.86) translateY(24px);
          opacity: 0;
        }
        60% {
          transform: scale(1.03) translateY(0);
          opacity: 1;
        }
        100% {
          transform: scale(1) translateY(0);
          opacity: 1;
        }
      }

      video {
        width: 100%;
        height: 100%;
        object-fit: contain;
        background: #000;
        display: block;
        z-index: 1;
      }

      .hint {
        margin-top: 12px;
        color: rgba(255, 255, 255, 0.88);
        font-size: 13px;
        text-align: center;
        line-height: 1.3;
        opacity: 0.95;
      }

      /* NO loop area */
      .noArea {
        display: none;
        margin-top: 14px;
        padding: 14px 12px;
        border-radius: 18px;
        border: 1px solid rgba(0, 0, 0, 0.1);
        background: rgba(255, 255, 255, 0.62);
        box-shadow: 0 16px 40px rgba(0, 0, 0, 0.1);
      }
      .noArea.on {
        display: block;
      }
      .noRow {
        display: flex;
        gap: 12px;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
      }
      .noRow img {
        width: 120px;
        height: 120px;
        object-fit: contain;
        filter: drop-shadow(0 10px 18px rgba(0, 0, 0, 0.18));
      }
      .noMsg {
        font-weight: 900;
        font-size: 16px;
      }

      /* BOOM */
      .boomFlash {
        position: fixed;
        inset: 0;
        background: #ffffff;
        opacity: 0;
        pointer-events: none;
        z-index: 20000;
      }
      .boomFlash.active {
        animation: boomFlashAnim 0.38s ease-out forwards;
      }
      @keyframes boomFlashAnim {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }

      .boomText {
        position: fixed;
        inset: 0;
        display: grid;
        place-items: center;
        font-size: 104px;
        font-weight: 950;
        color: #ff4d7d;
        text-shadow: 0 22px 60px rgba(0, 0, 0, 0.5);
        pointer-events: none;
        z-index: 21000;
        opacity: 0;
        transform: translateY(10px);
      }
      .boomText.active {
        animation: boomTextAnim 0.75s ease-out forwards;
      }
      @keyframes boomTextAnim {
        0% {
          transform: scale(0.3) translateY(12px);
          opacity: 0;
        }
        50% {
          transform: scale(1.45) translateY(0);
          opacity: 1;
        }
        100% {
          transform: scale(1) translateY(0);
          opacity: 0;
        }
      }

      .screenShake {
        animation: screenShakeAnim 0.55s ease-in-out;
      }
      @keyframes screenShakeAnim {
        0% {
          transform: translate(0);
        }
        15% {
          transform: translate(-14px, 7px);
        }
        30% {
          transform: translate(14px, -7px);
        }
        45% {
          transform: translate(-10px, 7px);
        }
        60% {
          transform: translate(10px, -7px);
        }
        75% {
          transform: translate(-7px, 5px);
        }
        90% {
          transform: translate(7px, -5px);
        }
        100% {
          transform: translate(0);
        }
      }

      /* Cinematic overlays */
      .fxLayer {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 22000;
        display: none;
        overflow: hidden;
      }
      .fxLayer.on {
        display: block;
      }

      .heart {
        position: absolute;
        animation: floatUp 1.85s ease-out forwards;
        filter: drop-shadow(0 10px 14px rgba(0, 0, 0, 0.25));
      }
      @keyframes floatUp {
        0% {
          transform: translateY(0) scale(0.85);
          opacity: 0;
        }
        15% {
          opacity: 1;
        }
        100% {
          transform: translateY(-380px) scale(1.35);
          opacity: 0;
        }
      }

      .sparkle {
        position: absolute;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.95);
        box-shadow: 0 0 14px rgba(255, 255, 255, 0.85);
        animation: twinkle 1.15s ease-in-out forwards;
        opacity: 0;
      }
      @keyframes twinkle {
        0% {
          transform: scale(0.3);
          opacity: 0;
        }
        35% {
          transform: scale(1.2);
          opacity: 1;
        }
        100% {
          transform: scale(0.2);
          opacity: 0;
        }
      }

      .floatingText {
        position: absolute;
        left: 50%;
        top: 12%;
        transform: translateX(-50%);
        font-weight: 950;
        font-size: clamp(22px, 3vw, 34px);
        color: rgba(255, 255, 255, 0.92);
        text-shadow: 0 18px 55px rgba(0, 0, 0, 0.55);
        opacity: 0;
        animation: floatText 2.6s ease-in-out infinite;
        white-space: nowrap;
        display: none; /* âœ… starts hidden */
      }
      @keyframes floatText {
        0% {
          opacity: 0;
          transform: translateX(-50%) translateY(8px) scale(0.98);
        }
        15% {
          opacity: 1;
        }
        50% {
          opacity: 1;
          transform: translateX(-50%) translateY(-10px) scale(1.02);
        }
        85% {
          opacity: 1;
        }
        100% {
          opacity: 0;
          transform: translateX(-50%) translateY(8px) scale(0.98);
        }
      }

      /* ========================= */
      /* GLITCH EFFECT (NO VIDEO)  */
      /* ========================= */
      .glitchActive {
        animation: glitchRGB 0.25s infinite;
      }
      @keyframes glitchRGB {
        0% {
          filter: none;
        }
        20% {
          filter: contrast(1.4) saturate(1.3);
        }
        40% {
          filter: hue-rotate(-10deg);
        }
        60% {
          filter: hue-rotate(10deg);
        }
        80% {
          filter: contrast(1.2);
        }
        100% {
          filter: none;
        }
      }

      .glitchBar {
        position: fixed;
        left: 0;
        width: 100%;
        height: 40px;
        background: rgba(255, 255, 255, 0.08);
        mix-blend-mode: difference;
        pointer-events: none;
        z-index: 23000;
        animation: glitchBarAnim 0.2s ease-out forwards;
      }
      @keyframes glitchBarAnim {
        0% {
          opacity: 1;
          transform: translateX(-40px);
        }
        100% {
          opacity: 0;
          transform: translateX(40px);
        }
      }
    </style>
  </head>

  <body>
    <div class="card" id="card">
      <h1>Hello Bubab, Will you be my Valentine? ðŸ’˜</h1>
      <p id="subtitle">BUBAB PLEZZZZZ</p>

      <div class="btns" id="mainBtns">
        <button id="yesBtn">Yes ðŸ’–</button>
        <button id="noBtn">No ðŸ™ƒ</button>
      </div>

      <div class="noArea" id="noArea">
        <div class="noRow">
          <img src="angrycat.gif" alt="Angry cat" />
          <div>
            <div class="noMsg" id="noMsg">Why noâ€¦ Iâ€™ll ask again ðŸ˜¾</div>
            <div style="opacity: 0.75; margin-top: 6px; font-size: 12px"></div>
          </div>
        </div>
        <div class="btns" style="margin-top: 12px">
          <button id="yesBtn2">Yes ðŸ’–</button>
          <button id="noBtn2">No ðŸ™ƒ</button>
        </div>
      </div>

      <p style="margin-top: 14px; font-size: 12px; opacity: 0.7"></p>
    </div>

    <!-- SUCCESS OVERLAY -->
    <div class="successOverlay" id="successOverlay" aria-hidden="true">
      <div class="successCard">
        <div class="successRow">
          <img id="successGif" src="happycat.gif" alt="Cat gif" />
          <div>
            <div class="successText" id="successText">YAY!! ðŸ’–</div>
            <div class="mini" id="successMini">Get readyâ€¦</div>
          </div>
        </div>

        <div class="countdown" id="countdown">3</div>

        <button class="continueBtn" id="continueBtn" type="button">
          Continue ðŸ’–
        </button>
      </div>
    </div>

    <!-- VIDEO MODAL -->
    <div class="videoModal" id="videoModal" aria-hidden="true">
      <div class="panel">
        <div class="videoBox">
          <video id="vid" playsinline muted preload="auto"></video>
        </div>
        <div class="hint">Tap outside to close early.</div>
      </div>
    </div>

    <!-- BOOM -->
    <div class="boomFlash" id="boomFlash"></div>
    <div class="boomText" id="boomText">BOOM ðŸ’–</div>

    <!-- CINEMATIC FX -->
    <div class="fxLayer" id="fxLayer">
      <div class="floatingText" id="floatingText">ðŸ’– I LOVE YOU BUBAB ðŸ’–</div>
    </div>

    <script>
      // Files in repo root
      const YES_VIDEO_SRC = "yes.mov";
      const NO_VIDEO_SRC = "no.mov";
      const HAPPY_GIF_SRC = "happycat.gif";
      const ANGRY_GIF_SRC = "angrycat.gif";

      // Customize texts here
      const YES_POPUP_TEXT = "YAY!! ðŸ’– (edit this message)";
      const SUCCESS_TEXT = "YEHEEY SEE YOU ON VALENTINES DAY BUBABðŸ’–!!";
      const NO_LOOP_TEXT =
        "BUBAB BAKET NO, TANONENG KETA OLET, Will You Be my Valentines?ðŸ˜¾";

      // âœ… Texts for BOTH versions (same animation)
      const LOVE_TEXT_YES =
        "ðŸ’– I LOVE YOU BUBAB SEE YOU ON VALENTINES DAY!!!!!! HEHEHEHE ðŸ’–";
      const LOVE_TEXT_NO = "ðŸ˜¾ NO?? HINDI PWEDE ANG NO OLETEN MO SAGOTANðŸ˜¼";

      const yesBtn = document.getElementById("yesBtn");
      const noBtn = document.getElementById("noBtn");
      const yesBtn2 = document.getElementById("yesBtn2");
      const noBtn2 = document.getElementById("noBtn2");

      const noArea = document.getElementById("noArea");
      const noMsg = document.getElementById("noMsg");
      const mainBtns = document.getElementById("mainBtns");

      const successOverlay = document.getElementById("successOverlay");
      const successGif = document.getElementById("successGif");
      const successText = document.getElementById("successText");
      const successMini = document.getElementById("successMini");
      const countdownEl = document.getElementById("countdown");
      const continueBtn = document.getElementById("continueBtn");

      const videoModal = document.getElementById("videoModal");
      const vid = document.getElementById("vid");

      const boomFlash = document.getElementById("boomFlash");
      const boomText = document.getElementById("boomText");

      const fxLayer = document.getElementById("fxLayer");
      const floatingText = document.getElementById("floatingText");

      let countdownTimer = null;
      let noLoopTimer = null;
      let noCount = 0;

      let pendingVideoSrc = null;
      let currentVideoType = "none"; // "yes" | "no" | "none"

      let heartsTimer = null;
      let sparkleTimer = null;

      // âœ… glitch timer
      let glitchTimer = null;

      function rand(min, max) {
        return Math.random() * (max - min) + min;
      }

      function makePopup(text) {
        const p = document.createElement("div");
        p.className = "popup";
        p.textContent = text;

        const pad = 50;
        p.style.left = rand(pad, window.innerWidth - pad) + "px";
        p.style.top = rand(pad, window.innerHeight - pad) + "px";
        p.style.rotate = rand(-6, 6) + "deg";

        document.body.appendChild(p);
        setTimeout(() => p.remove(), rand(1200, 2200));
      }

      function openSuccessOverlay() {
        successOverlay.classList.add("on");
        successOverlay.setAttribute("aria-hidden", "false");
      }
      function closeSuccessOverlay() {
        successOverlay.classList.remove("on");
        successOverlay.setAttribute("aria-hidden", "true");
      }

      function openModal() {
        videoModal.classList.add("on");
        videoModal.setAttribute("aria-hidden", "false");
      }
      function closeModal() {
        videoModal.classList.remove("on");
        videoModal.setAttribute("aria-hidden", "true");
      }

      function stopVideo() {
        vid.pause();
        vid.currentTime = 0;
        vid.muted = true;
        vid.removeAttribute("src");
        vid.load();
        currentVideoType = "none";
      }

      /* ========================= */
      /* GLITCH (NO VIDEO ONLY)    */
      /* ========================= */
      function startGlitch() {
        stopGlitch();
        document.body.classList.add("glitchActive");

        glitchTimer = setInterval(() => {
          const bar = document.createElement("div");
          bar.className = "glitchBar";
          bar.style.top = Math.random() * window.innerHeight + "px";
          bar.style.height = Math.random() * 60 + 20 + "px";
          document.body.appendChild(bar);
          setTimeout(() => bar.remove(), 220);
        }, 180);
      }

      function stopGlitch() {
        document.body.classList.remove("glitchActive");
        clearInterval(glitchTimer);
        glitchTimer = null;
        document.querySelectorAll(".glitchBar").forEach((b) => b.remove());
      }

      function stopFX() {
        clearInterval(heartsTimer);
        clearInterval(sparkleTimer);
        heartsTimer = null;
        sparkleTimer = null;
        fxLayer.classList.remove("on");
        floatingText.style.display = "none"; // âœ… hide after video
        [...fxLayer.querySelectorAll(".heart,.sparkle")].forEach((el) =>
          el.remove(),
        );
      }

      function startFX(type) {
        stopFX();
        fxLayer.classList.add("on");

        // âœ… SAME animation sequence, just different text
        floatingText.textContent =
          type === "yes" ? LOVE_TEXT_YES : LOVE_TEXT_NO;
        floatingText.style.display = "block";

        const heartInterval = type === "yes" ? 120 : 240;
        heartsTimer = setInterval(() => {
          const h = document.createElement("div");
          h.className = "heart";
          h.textContent =
            type === "yes" ? (Math.random() < 0.5 ? "ðŸ’–" : "ðŸ’˜") : "ðŸ’”";

          h.style.left = rand(3, 97) + "vw";
          h.style.top = rand(70, 95) + "vh";
          h.style.fontSize =
            rand(type === "yes" ? 18 : 16, type === "yes" ? 46 : 36) + "px";
          h.style.animationDuration =
            rand(type === "yes" ? 1.2 : 1.1, type === "yes" ? 2.1 : 1.8) + "s";

          fxLayer.appendChild(h);
          setTimeout(() => h.remove(), 2400);
        }, heartInterval);

        const sparkleInterval = type === "yes" ? 160 : 260;
        sparkleTimer = setInterval(() => {
          const s = document.createElement("div");
          s.className = "sparkle";
          s.style.left = rand(5, 95) + "vw";
          s.style.top = rand(5, 70) + "vh";
          fxLayer.appendChild(s);
          setTimeout(() => s.remove(), 1400);
        }, sparkleInterval);
      }

      function startVideoWithSound(src, type) {
        stopVideo();
        currentVideoType = type;

        vid.playsInline = true;
        vid.src = src;
        vid.muted = false;

        openModal();

        const p = vid.play();
        if (p && typeof p.catch === "function") {
          p.catch(() => {
            vid.muted = true;
            vid.play().catch(() => {});
          });
        }

        // âœ… now both YES and NO get the same floatingText animation
        startFX(type);

        // âœ… glitch ONLY for NO video
        if (type === "no") startGlitch();
      }

      function clearNoLoop() {
        clearInterval(noLoopTimer);
        noLoopTimer = null;
        noArea.classList.remove("on");
        mainBtns.style.display = "flex";
      }

      function startNoLoop() {
        noArea.classList.add("on");
        mainBtns.style.display = "none";
        noMsg.textContent = NO_LOOP_TEXT;

        if (noLoopTimer) clearInterval(noLoopTimer);
        noLoopTimer = setInterval(() => makePopup(NO_LOOP_TEXT), 900);
      }

      function startCountdown(seconds, onDone) {
        clearInterval(countdownTimer);
        let n = seconds;
        countdownEl.textContent = String(n);
        countdownTimer = setInterval(() => {
          n -= 1;
          countdownEl.textContent = String(n);
          if (n <= 0) {
            clearInterval(countdownTimer);
            countdownTimer = null;
            onDone();
          }
        }, 1000);
      }

      function runYesFlow() {
        clearNoLoop();
        noCount = 0;

        pendingVideoSrc = YES_VIDEO_SRC;
        currentVideoType = "yes";

        successGif.src = HAPPY_GIF_SRC;
        successText.textContent = SUCCESS_TEXT;
        successMini.textContent = "Get readyâ€¦";
        continueBtn.textContent = "Continue ðŸ’–";

        makePopup(YES_POPUP_TEXT);
        openSuccessOverlay();

        startCountdown(3, () => {
          successMini.textContent = "Okayâ€¦ press Continue ðŸ’–";
          countdownEl.textContent = "âœ“";
        });
      }

      continueBtn.addEventListener("click", () => {
        if (!pendingVideoSrc) return;

        closeSuccessOverlay();

        boomFlash.classList.add("active");
        boomText.classList.add("active");
        document.body.classList.add("screenShake");

        setTimeout(() => {
          boomFlash.classList.remove("active");
          boomText.classList.remove("active");
          document.body.classList.remove("screenShake");

          startVideoWithSound(pendingVideoSrc, currentVideoType);
          pendingVideoSrc = null;
        }, 520);
      });

      function applyNoEscalation() {
        if (noCount >= 3) {
          pendingVideoSrc = NO_VIDEO_SRC;
          currentVideoType = "no";

          successGif.src = ANGRY_GIF_SRC;
          successText.textContent = "Dili Parin bubab?";
          successMini.textContent =
            "Pendutin mo ung sa baba baka magbagu esep mo";
          continueBtn.textContent = "pendutin mo ðŸ˜¼";

          openSuccessOverlay();

          clearInterval(countdownTimer);
          countdownTimer = null;
          countdownEl.textContent = "!";
        }
      }

      function runNoFlow() {
        noCount += 1;
        startNoLoop();
        makePopup(NO_LOOP_TEXT);
        applyNoEscalation();
      }

      vid.addEventListener("ended", () => {
        stopGlitch();
        stopFX();
        stopVideo();
        closeModal();
      });

      videoModal.addEventListener("click", (e) => {
        if (e.target === videoModal) {
          stopGlitch();
          stopFX();
          stopVideo();
          closeModal();
        }
      });

      yesBtn.addEventListener("click", runYesFlow);
      noBtn.addEventListener("click", runNoFlow);
      yesBtn2.addEventListener("click", runYesFlow);
      noBtn2.addEventListener("click", runNoFlow);
    </script>
  </body>
</html>
